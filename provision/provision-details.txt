# provision-details.txt
#
# This file contains the provisioning information that was used to build
# and package the 10up-quantal-0.1 box for distribution.

# update all of the package references before installing anything
apt-get update --force-yes -y

# PHP-FPM
# kick of the install swarm with PHP5 and php-fpm
apt-get install --force-yes -y  php5 php5-fpm php-pear php5-common php5-mcrypt php5-mysql php5-cli php5-gd php-apc php5-dev

# NGINX
# Install and configure nginx with some basic config files
apt-get install --force-yes -y nginx

# MYSQL
# We need to set the selections to automatically fill the password prompt
# for mysql while it is being installed. The password in the following two
# lines *is* actually set to the word 'blank' for the root user.
echo mysql-server mysql-server/root_password password blank | sudo debconf-set-selections
echo mysql-server mysql-server/root_password_again password blank | sudo debconf-set-selections

apt-get install --force-yes -y mysql-server php5-mysql

# MISC PACKAGES
apt-get install --force-yes -y git-core
apt-get install --force-yes -y curl
apt-get install --force-yes -y make
apt-get install --force-yes -y ngrep
# I like vi and I like vim better
apt-get install --force-yes -y vim

# MEMCACHED
# Use memcached and the PECL memcache extension. At some point we can move
# to the PECL memcached extension, but this better mirrors production
# environments
apt-get install --force-yes -y memcached
# We have to enter yes once. If this install changes, this will no longer work
# Might consider installing yum package mamager and using yum to install to get
# around this requiremnt. Without this, the script stalls upon completion.
printf "yes\n" | pecl install memcache
